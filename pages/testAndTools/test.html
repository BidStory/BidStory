<script>
  /**
 * ุฏุงูุฉ ูุญุณุงุจ ูุฌููุน ุงูููู ุงูุฌุฒุฆูุฉ ูุงููุณุจุฉ ุงููููุฉ
 * @param {Array} values - ูุตูููุฉ ูู ุงููุงุฆูุงุชุ ูู ูุงุฆู ูุญุชูู ุนูู:
 *                         value: ูููุฉ ุฑูููุฉ (ูุซู 3 ุฃู 5 ุฃู 20)
 *                         percent: ุงููุณุจุฉ ุงููุฆููุฉ ุงููุนุทุงุฉ ุจุดูู ุนุดุฑู (ูุซู 0.5 ุชุนูู 50%)
 * @returns {Object} ูุญุชูู ุนูู:
 *                   totalW: ูุฌููุน ุงูููู ุงูุฌุฒุฆูุฉ (sum of value * percent)
 *                   totalValue: ูุฌููุน ุงูููู ุงููุงููุฉ (sum of all values)
 *                   overallPercent: ุงููุณุจุฉ ุงููููุฉ (totalW ููุณูููุง ุนูู totalValue)
 */
function calculateTotal(values) {
  // ุชููุฆุฉ ูุชุบูุฑ ูุชุฌููุน ูุฌููุน ุงูููู ุงูุฌุฒุฆูุฉ
  let totalW = 0;

  // ุชููุฆุฉ ูุชุบูุฑ ูุชุฌููุน ูุฌููุน ุงูููู ุงููุงููุฉ
  let totalValue = 0;

  // ููุฑ ุนูู ูู ุนูุตุฑ (ูุงุฆู) ูู ุงููุตูููุฉ
  values.forEach(item => {
    // ูุณุชุฎุฑุฌ ุงููููุฉ (value) ูุงููุณุจุฉ ุงููุฆููุฉ (percent) ูู ุงููุงุฆู ุงูุญุงูู
    const { value, percent } = item;

    // ูุญุณุจ ุงููููุฉ ุงูุฌุฒุฆูุฉ ุจุถุฑุจ ุงููููุฉ ูู ุงููุณุจุฉ (ูุซูุงู 3 * 0.5 = 1.5)
    const w = value * percent;

    // ูุถูู ุงููููุฉ ุงูุฌุฒุฆูุฉ ูููุฌููุน ุงูููู
    totalW += w;

    // ูุถูู ุงููููุฉ ุงููุงููุฉ ูููุฌููุน ุงูููู ููููู
    totalValue += value;
  });

  // ุจุนุฏ ุงูุงูุชูุงุก ูู ุฌููุน ุงูุนูุงุตุฑุ ูุญุณุจ ุงููุณุจุฉ ุงููููุฉ
  // ููู ูุณุจุฉ ุงููุฌููุน ุงูุฌุฒุฆู ุฅูู ูุฌููุน ุงูููู ุงููุงููุฉ
  // ูุซุงู: ุฅุฐุง ูุงู totalW = 5.5 ู totalValue = 28 ูุฅู overallPercent = 5.5 / 28
  const overallPercent = totalW / totalValue;

  // ูุนูุฏ ูุงุฆู ูุญุชูู ุนูู ุงููุชุงุฆุฌ ุงูุซูุงุซุฉ
  return {
    totalW: totalW,               // ูุฌููุน ุงูููู ุงูุฌุฒุฆูุฉ
    totalValue: totalValue,       // ูุฌููุน ุงูููู ุงููุงููุฉ
    overallPercent: overallPercent // ุงููุณุจุฉ ุงููููุฉ (ุนุฏุฏ ุนุดุฑู)
  };
}

// --- ูุซุงู ุนููู ุนูู ุงุณุชุฎุฏุงู ุงูุฏุงูุฉ ---

// ูุตูููุฉ ุจูุงูุงุช ุชุชุถูู ููู ููุณุจูุง ุงูุนุดุฑูุฉ
const data = [
  { value: 3, percent: .9 },   // 3 * 50% = 1.5
  { value: -5, percent: 0.9 },   // 5 * 20% = 1
  { value: 20, percent: 0.9 }  // 20 * 15% = 3
];

// ูุณุชุฏุนู ุงูุฏุงูุฉ ูุน ุงููุตูููุฉ ุงูุชู ุชุญุชูู ุนูู ุงูููู ูุงููุณุจ
const result = calculateTotal(data);

// ูุทุจุน ุงููุชุงุฆุฌ ูู ุงููููุณูู ูุน ุจุนุถ ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ูุงูุชูุณูู
console.log("โ ูุฌููุน ุงูููู ุงูุฌุฒุฆูุฉ (totalW):", result.totalW);           // 5.5
console.log("๐ฆ ูุฌููุน ุงูููู ุงููุงููุฉ (totalValue):", result.totalValue);   // 28
console.log("๐ ุงููุณุจุฉ ุงููููุฉ (overallPercent):", (result.overallPercent * 100).toFixed(2) + "%");  // 19.64%
console.log("๐  ููุชุงูุฏ (check):",result.overallPercent  *result.totalValue);  // 19.64%

</script>