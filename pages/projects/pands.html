<!---this is pands.html file---->
<script>

    let proId_ = null;
    let dbNoUp_item = null;
    let dbUp_item = null;

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„
    async function initItemsPage() 
    {

        proId_ = "ite_" + localStorage.getItem("selectedProject");
        dbNoUp_item = await new noUpgrade(proId_);

        //Ø§Ø¯Ø®Ø§Ù„ Ù†Øµ Ø§Ù„ØªØ¹Ø±ÙŠÙ Ù„ÙƒÙ„ Ø§Ù„Ø¨Ù†ÙˆØ¯
        const inputs = document.querySelectorAll('[id="pandText"]');
        inputs.forEach(input =>
        {
            input.placeholder = getLang(1260);
        });
        await renumber_();
    }

    proId_ = "ite_" + localStorage.getItem("selectedProject");

    let pandsTable = new setTableParameter(
        "itemsTable", // ID of the container element
        proId_, // Table ID and database name
        "itemsTable_raw", // ID of the row template to copy
        "itemsTable_Altraw", // ID of alternate row to show on click
        true, // Show table header?
        true, // Add alternate div when row is clicked?
        true // Start with new row?
    );
    let isWatcherEnabled = true; // Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØºÙŠØ± Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯

    // Ù…Ø³ØªÙ…Ø¹ Ø§Ù„Ø­Ø¯Ø«
    document.addEventListener("tableDataChanged", async (event) =>
    {
        if (!isWatcherEnabled) return; // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙƒÙˆØ¯ Ù…ØºÙ„Ù‚Ù‹Ø§ØŒ Ø³ÙŠØªÙ… ØªØ®Ø·ÙŠ Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§.

        const storeName = event.detail.storeName;
        const dataName = event.detail.dataName;
        if (dataName && dataName.includes("ite_"))//Ø§Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø§Ø³Ù… ÙŠØ­ØªÙˆÙŠ Ø¹Ù„ÙŠ ite_
        {
            await renumber_();
            // window.reloadCurrentSection();
        }
    });
    async function renumber_() {
    isWatcherEnabled = false; // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø¤Ù‚ØªÙ‹Ø§
    try {
        while(await pandsTable.checkProcessRun()==true){ await delay(50);}
         // ØªØ£Ø®ÙŠØ± Ù‚Ù„ÙŠÙ„ Ù‚Ø¨Ù„ Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
        let re = [];
        let parentId = [];
        let outPuts = document.querySelectorAll('[id="pandNumber"]');

        // Ø¬Ù…Ø¹ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        outPuts.forEach((el) => {
            re.push(el.value);


            parentId.push(el.parentElement.parentElement.parentElement.parentElement.parentElement.id.replace('_',''));
           

            
        });

        // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ±Ù‚ÙŠÙ…
        let ree = reNumber(re); // ØªØ£ÙƒØ¯ Ø£Ù† reNumber ØªØ¹ÙŠØ¯ Ù…ØµÙÙˆÙØ© Ù…Ø±Ù‚Ù…Ø© Ø­Ø³Ø¨ ØªØ±ØªÙŠØ¨ re
let index_=null;

        // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        outPuts.forEach((el, index) => {
            index_=ree[index];
            if(/^[a-zA-Z]{4}\d+/.test(parentId[index])){
            // Ù‚Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ù„ØªÙˆØ¶ÙŠØ­ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            dbNoUp_item.keySet(parentId[index].replace('_',''), 'pandNumber',index_);
            // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø¹Ù†Ø§ØµØ±
            el.value = index_;
            }
        });

        await delay(200); // ØªØ£Ø®ÙŠØ± Ù‚Ù„ÙŠÙ„ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¹ÙŠÙŠÙ†
    } catch (error) {
        console.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ±Ù‚ÙŠÙ…:", error);
    } finally {
        isWatcherEnabled = true; // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ…ÙƒÙŠÙ† Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
    }
}

    document.addEventListener("clickButtonInRow", async (event) =>
    {

        const data = event.detail.kind;

        console.log(`ğŸ“¢ ØªÙ… Ø§Ù„Ø¶ØºØ· Ø¹Ù„ÙŠ ${data} ${data[0]} kkkkkkkkk---kkkkk`);


    });

    document.addEventListener("selectRow", (event) =>
    {
        const data = event.detail.kind;
        console.log(`ğŸ“¢ ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙ ${data}`);
        localStorage.setItem("selectedProject", data.replace("_", ""));
        const nav_ = document.getElementById("nav2");
        nav_.style.display = "";
    });
</script>

<div id="itemsTable"></div>
<!-- Ù…ÙƒØ§Ù† Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ø¯ÙˆÙ„ -->

<div DivId id="itemsTable_raw" style="display: none" class="">
    <table>
        <thead class="hide-text">
            <tr>
                <th id="t_37"></th>
                <th id="t_413"></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <input id="pandNumber" type="text" placeholder=""
                        style="border: none; background-color: transparent; color: black" />


                </td>
                <td>
                    <input id="pandText" type="text" placeholder=""
                        style="border: none; background-color: transparent; color: black" />
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div DivId id="itemsTable_Altraw" style="display: none" class="">
    <div style="min-height: 6px"></div>
    <button type="button" id="t_138_1" class="buttonT"></button>
    <button type="button" id="t_472_controlNum" class="buttonT"></button>
</div>
<script>

</script>