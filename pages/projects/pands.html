<script>
    let proId_ = null;
    let dbNoUp_item = null;
    let dbUp_item = null;
    // تهيئة الجدول
    async function initItemsPage() 
    {
        proId_ = "ite_" + localStorage.getItem("selectedProject");
        dbNoUp_item = await new noUpgrade(proId_);
        dbUp_item = await new upgrade(proId_);
    }
    proId_ = "ite_" + localStorage.getItem("selectedProject");

    let pandsTable = new setTableParameter(
        "itemsTable", // ID of the container element
        proId_, // Table ID and database name
        "itemsTable_raw", // ID of the row template to copy
        "itemsTable_Altraw", // ID of alternate row to show on click
        true, // Show table header?
        true, // Add alternate div when row is clicked?
        true // Start with new row?
    );
    async function initAllProjectPage()
    {
        await tt.getAllRowsDataOnly();
    }
    // مستمع الحدث
    document.addEventListener("tableDataChanged", (event) =>
    {
        const storeName = event.detail.storeName;
        console.log(`📢1 تغيير في بيانات الجدول: ${storeName}`);
    });


    document.addEventListener("clickButtonInRow", async (event) =>
    {

        const data = event.detail.kind;
        console.log(`📢 تم الضغط علي  ${data[0]} -> buttom id`);
       const parts = data[0].split('_');
        const part2 = parts[2];
        if (part2 == 'controlNum')
        {
            const dataAll = await dbNoUp_item.getAllDataFromTable(data[1].replace('_', ''));
            q(dataAll);
        }
        
    });


    document.addEventListener("selectRow", (event) =>
    {
        const data = event.detail.kind;
        console.log(`📢 تم اختيار الصف ${data}`);
        localStorage.setItem("selectedProject", data.replace("_", ""));
        const nav_ = document.getElementById("nav2");
        nav_.style.display = "";
    });
</script>

<div id="itemsTable"></div>
<!-- مكان إضافة الجدول -->

<div DivId id="itemsTable_raw" style="display: none" class="">
    <table>
        <thead class="hide-text">
            <tr>
                <th id="t_37"></th>
                <th id="t_413"></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <input id="pandNum" type="text" placeholder="" style="
              width: 30px;
              border: none;
              background-color: transparent;
              color: black;
            " />
                </td>
                <td>
                    <input id="pandText" type="text" placeholder="" readonly
                        style="border: none; background-color: transparent; color: black" />
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div DivId id="itemsTable_Altraw" style="display: none" class="">
    <div style="min-height: 6px"></div>
    <button type="button" id="t_138_1" class="buttonT"></button>
    <button type="button" id="t_472_controlNum" class="buttonT"></button>
</div>
<script>
    const input = document.getElementById("pandText");
    if (input)
    {
        input.placeholder = getLang(906);
    }
</script>