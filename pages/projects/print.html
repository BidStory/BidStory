<select id="actionSelector" onchange="handleSelection(this.value)">
    <option value="">-- Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© --</option>
    <option id="t_1276" value="1"></option>
    <option value="2">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</option>
    <option value="3">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</option>
</select>

<div id="tablePrintContaner" >

</div>








<script>
    let allProcessData = null;
    async function initPrintPage ()
    {
        await waitMes();
        allProcessData = await getSingleProcessData( selectedProject );
        if ( allProcessData )
        {
            console.log( allProcessData.items );
        }
        Swal.close();
    }
    function handleSelection ( value )
    {
        switch ( value )
        {
            case "1":
                Estimate();
                break;
            case "2":
                importData();
                break;
            case "3":
                deleteData();
                break;
            default:
                console.log( "â„¹ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø®ÙŠØ§Ø± Ù…Ø­Ø¯Ø¯" );
        }
    }


    async function Estimate ()
    {
        const result = await Promise.all(
            allProcessData.items.map( async ( item ) =>
            {
                try
                {
                    const db = new noUpgrade( 'ite_' + selectedProject );
                    const rows = await db.getAllDataFromTable( item );

                    const entry = Object.fromEntries( rows.map( ( { key, value } ) => [ key, value ] ) );

                    return {
                        numbering: entry.numbering || '',
                        pandText: entry.pandText || '',
                        kmia: entry.kmia || '',
                        sear: entry.sear || '',
                        tot: entry.tot || ''
                    };
                } catch ( err )
                {
                    console.error( `âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù‚Ø±Ø§Ø¡Ø© Ø¨ÙŠØ§Ù†Ø§Øª ${ item }:`, err );
                    return null; // Ù„ØªØ®Ø·ÙŠ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙŠ Ø¨Ù‡Ø§ Ø®Ø·Ø£
                }
            } )
        );
        console.log( result.filter( Boolean ) );
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙØ§Ø±ØºØ© Ø¥Ù† ÙˆØ¬Ø¯Øª
        return result.filter( Boolean );
    }



</script>