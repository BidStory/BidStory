<style>
    .section0 {
        display: none;
        padding: 20px;
        background-color: white;
        margin: 10px;
        border-radius: 10px;
    }

    .active0 {
        display: block;
    }
</style>
<script>
    let dataBaseIdForSelectedPand = null;
    let dbNoUpgradSelectedPand = null;
    let dbUpgradSelectedPand = null;
    let selectedPandId = null;
    async function initSelectedPandPage ()
    {

        dataBaseIdForSelectedPand = 'ite_' + localStorage.getItem( 'selectedProject' );
        dbNoUpgradSelectedPand = await new noUpgrade( dataBaseIdForSelectedPand );
        dbUpgradSelectedPand = await new upgrade( dataBaseIdForSelectedPand );
        selectedPandId = localStorage.getItem( 'selectedPand' );
        q( 'selectedPandId eeeeeee -> ' + selectedPandId );
        //عرض معرف البند
        document.getElementById( "selectedPandId" ).innerText = selectedPandId;
        await restoreAllInputsFromIndexDB( "mainSelectedPandPage", dbNoUpgradSelectedPand, selectedPandId );
        await watchingAllInputs2IndexDB( "mainSelectedPandPage", dbNoUpgradSelectedPand, selectedPandId );

    }

</script>

<div id="mainSelectedPandPage">

    <textarea id="pandText"></textarea>
    <br>
    <table>
        <tr>
            <td>
                <!--   الوحدات -->
                <button onclick="showPart('unit')">
                    <img id="i_units" alt="unit"
                        style="width:20px; height:20px; vertical-align:middle; margin-left:5px;">
                    <br> <span id="t_48"></span>
                </button>
            </td>
            <td>
                <!-- الاشتراطات -->
                <button onclick="showPart('condations')">
                    <img id="i_condation_mo" alt="unit"
                        style="width:20px; height:20px; vertical-align:middle; margin-left:5px;">
                    <br> <span id="t_279"></span>
                </button>
            </td>
        </tr>
    </table>


    <br>
    <br>
    <!-- الاشتراطات -->
    <div id="condations" class="section0">
        hesham
    </div>
    <!--  الوحدات-->
    <div id="unit" class="section0">

        <!---- الكمية --->
        <input type="number" id="kmia">
        <br>
        <!---- سعر الوحدة --->
        <input type="number" id="sear">
        <br>
        <!---- المجموع --->
        <input type="number" id="tot">
        <br>
        <!---- نوع البند المالي --->
        <h3 id="t_137"></h3>
        <select id="kindFinancialSelectPand">
            <option disabled selected id="t_1259"></option>
        </select>
        <!----وحدة البند-->
        <h3 id="t_66"></h3>
        <select id="UnitPand">
            <option disabled selected id="t_1262"></option>
        </select>
        <!----نوع البند-->
        <h3 id="t_204"></h3>
        <select id="PandType">
            <option disabled selected id="t_1263"></option>
        </select>
        <!----نوع الاعمل-->
        <h3 id="t_63"></h3>
        <select id="KindWork">
            <option disabled selected id="t_1264"></option>
        </select>
    </div>
    <!-- الكود التعريفي -->
    <br>
    <h3 id="t_615"></h3>
    <label id="selectedPandId"></label>

</div>

<script>
    async function showPart ( part )
    {
        document.querySelectorAll( ".section0" ).forEach( section => section.classList.remove( "active0" ) );

        // إظهار القسم المطلوب
        targetSection = document.getElementById( part );
        targetSection.classList.add( "active0" );
    }

    async function calTot ()
    {
        const kmia_ = document.getElementById( "kmia" );
        const sear_ = document.getElementById( "sear" );
        const tot_ = document.getElementById( "tot" );

        let k = parseFloat( kmia_.value ) || 0;
        let s = parseFloat( sear_.value ) || 0;

        tot_.value = ( k * s ).toFixed( DecimalPoint ); // التقريب لرقمين عشريين (اختياري)
        isTableWatcherEnabled = false;
        await dbNoUpgradSelectedPand.keySet( selectedPandId, 'tot', tot_.value );
        isTableWatcherEnabled = true;
    }

    //#region اختيار نوع وحدة القياس
    function pandUnitSelect ()
    {
        const select = document.getElementById( "UnitPand" );

        for ( let cIndex = 0; cIndex <= 10; cIndex++ )
        {
            const name = getUnitByCIndex( cIndex, langSelectList0 );
            if ( name )
            {
                const option = document.createElement( "option" );
                option.value = cIndex;
                option.textContent = name;
                select.appendChild( option );
            }
        }
    }
    pandUnitSelect();
    //#endregion


    //#region اختيار نوع البند المالي
    function pandKindFinancialSelect ()
    {
        const select = document.getElementById( "kindFinancialSelectPand" );

        for ( let cIndex = 0; cIndex <= 10; cIndex++ )
        {
            const name = getKindFinancialByCIndex( cIndex, langSelectList0 );
            if ( name )
            {
                const option = document.createElement( "option" );
                option.value = cIndex;
                option.textContent = name;
                select.appendChild( option );
            }
        }
    }
    pandKindFinancialSelect();
    //#endregion

    //#region اختيار نوع البند 
    function pandKindSelect ()
    {
        const select = document.getElementById( "PandType" );

        for ( let cIndex = 0; cIndex <= 10; cIndex++ )
        {
            const name = getPandTypeByCIndex( cIndex, langSelectList0 );
            if ( name )
            {
                const option = document.createElement( "option" );
                option.value = cIndex;
                option.textContent = name;
                select.appendChild( option );
            }
        }
    }
    pandKindSelect();
    //#endregion

    //#region اختيار نوع الاعمال 
    function pandKindWorkSelect ()
    {
        const select = document.getElementById( "KindWork" );

        for ( let cIndex = 0; cIndex <= 10; cIndex++ )
        {
            const name = getKindWorkCIndex( cIndex, langSelectList0 );
            if ( name )
            {
                const option = document.createElement( "option" );
                option.value = cIndex;
                option.textContent = name;
                select.appendChild( option );
            }
        }
    }
    pandKindWorkSelect();
    //#endregion
</script>