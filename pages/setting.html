<script>

  watchAndSaveInputs2Local( "settingPage" );
</script>
<div id="settingPage">
  <!-- ุงุฎุชูุงุฑ ุงููุบู -->
  <h2 id="t_266"></h2>
  <select id="languageSelect">
    <option value="ar">ุงูุนุฑุจูุฉ</option>
    <option value="en">English</option>
  </select>
  <br><br>
  <!-- ุงูุนูุงูุฉ ุงูุนุดุฑูุฉ -->
  <h3 id="t_174"></h3>
  <label id="t_602"></label>
  <br><br>
  <input type="number" id="DecimalPoint" min="0" max="5">

</div>
<br><br>

<button onclick="clearEverything()"
  style="padding: 10px 20px; font-size: 16px; background-color: crimson; color: white; border: none; border-radius: 5px; cursor: pointer;">
  ๐งน ูุณุญ ูู ุจูุงูุงุช ุงููููุน
</button>
<br><br>
<label for="fileInput">๐ฅ ุงุณุชูุฑุงุฏ ููุงุนุฏ ุจูุงูุงุช</label>
<input type="file" accept=".zip" onchange="importMultipleDatabasesFromFile(this.files[0])">
<br>
<button onclick="exportAllDatabases()">โฌ๏ธ ุชุตุฏูุฑ ุฌููุน ุงูููุงุนุฏ ุชููุงุฆููุง</button>


<script>
  document.getElementById( "languageSelect" ).addEventListener( "change", async function ()
  {
    location.reload(); // ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ูุชุทุจูู ุงููุบุฉ ุงูุฌุฏูุฏุฉ
  } );

  const decimalInput = document.getElementById( 'DecimalPoint' );
  decimalInput.addEventListener( 'input', async () =>
  {
    const value = parseFloat( decimalInput.value );
    if ( value < 0 ) decimalInput.value = 0;
    if ( value > 5 ) decimalInput.value = 5;
    await getSetting();
  } );

  async function clearEverything ()
  {
    // ๐งน 1. ุญุฐู LocalStorage
    localStorage.clear();

    // ๐งน 2. ุญุฐู SessionStorage
    sessionStorage.clear();

    // ๐งน 3. ุญุฐู ุฌููุน ููุงุนุฏ IndexedDB
    if ( window.indexedDB && indexedDB.databases )
    {
      const databases = await indexedDB.databases();
      for ( const db of databases )
      {
        if ( db.name )
        {
          indexedDB.deleteDatabase( db.name );
        }
      }
    }

    // ๐งน 4. ุญุฐู ุฌููุน ุงูููููุฒ (ูู ููุณ ุงููุทุงู)
    document.cookie.split( ";" ).forEach( cookie =>
    {
      const eqPos = cookie.indexOf( "=" );
      const name = eqPos > -1 ? cookie.substr( 0, eqPos ) : cookie;
      document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/";
    } );

    // ๐งน 5. ุญุฐู Cache API
    if ( 'caches' in window )
    {
      const keys = await caches.keys();
      for ( const key of keys )
      {
        await caches.delete( key );
      }
    }

    console.log( "๐งผ ุชู ูุณุญ ูู ุจูุงูุงุช ุงููููุน ูู ุงููุชุตูุญ ๐ฅ" );

    // ๐ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ูุชุฃููุฏ ุงููุณุญ
    location.reload();
  }

</script>