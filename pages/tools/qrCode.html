<h2>ğŸ”² Ø¥Ù†Ø´Ø§Ø¡ QR Code Ø·ÙˆÙŠÙ„</h2>
<textarea id="textToEncode" rows="5" placeholder="Ø£Ø¯Ø®Ù„ Ù†ØµÙ‹Ø§ Ø·ÙˆÙŠÙ„Ù‹Ø§ Ù‡Ù†Ø§ (Ø­ØªÙ‰ 1000+ Ø­Ø±Ù)"></textarea><br>
<button onclick="generateQRCode()">âœ… Ø¥Ù†Ø´Ø§Ø¡ QR</button><br>
<div id="qr-output"></div>

<hr>

<h2>ğŸ“· Ù‚Ø±Ø§Ø¡Ø© QR Code Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</h2>
<button onclick="startQRScanner()">ğŸ“¡ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø³Ø­</button><br>
<video id="video" width="300" height="200" autoplay></video>
<div id="output">ğŸ‘ï¸ Ù„Ù… ÙŠØªÙ… Ù‚Ø±Ø§Ø¡Ø© Ø´ÙŠØ¡ Ø¨Ø¹Ø¯...</div>

<!-- Ù…ÙƒØªØ¨Ø© ZXing UMD -->
<script src="https://cdn.jsdelivr.net/npm/@zxing/library@0.18.6/umd/index.min.js"></script>

<script>
  function generateQRCode() {
    const text = document.getElementById("textToEncode").value.trim();
    if (!text) return alert("âš ï¸ Ø£Ø¯Ø®Ù„ Ù†ØµÙ‹Ø§ Ø£ÙˆÙ„Ø§Ù‹!");

    const qrCode = new ZXing.QRCodeWriter();
    const hints = new Map();
    const width = 256;
    const height = 256;

    const bitMatrix = qrCode.encode(text, ZXing.BarcodeFormat.QR_CODE, width, height, hints);

    const canvas = document.createElement("canvas");
    canvas.width = width;
    canvas.height = height;
    const ctx = canvas.getContext("2d");

    ctx.fillStyle = "#000";
    ctx.fillRect(0, 0, width, height);
    ctx.fillStyle = "#fff";

    for (let y = 0; y < height; y++) {
      for (let x = 0; x < width; x++) {
        if (bitMatrix.get(x, y)) {
          ctx.fillRect(x, y, 1, 1);
        }
      }
    }

    const output = document.getElementById("qr-output");
    output.innerHTML = "";
    output.appendChild(canvas);
  }

  async function startQRScanner() {
    const video = document.getElementById("video");
    const output = document.getElementById("output");

    const codeReader = new ZXing.BrowserQRCodeReader();
    output.textContent = "ğŸ“¡ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø³Ø­...";

    try {
      const result = await codeReader.decodeOnceFromVideoDevice(undefined, "video");
      output.textContent = "âœ… ØªÙ… Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: " + result.text;
      codeReader.reset();
    } catch (err) {
      output.textContent = "âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ù…Ø³Ø­: " + err;
    }
  }
</script>
